

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Цветок в стакане</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="flower">
        <div class="f-wrapper">
            <div class="flower__line"></div>
            <div class="f">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__leaf flower__leaf--5"></div>
                <div class="flower__leaf flower__leaf--6"></div>
                <div class="flower__leaf flower__leaf--7"></div>
                <div class="flower__leaf flower__leaf--8 flower__fall-down--yellow"></div>
            </div>
        </div>

        <div class="f-wrapper f-wrapper--2">
            <div class="flower__line"></div>
            <div class="f">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__leaf flower__leaf--5"></div>
                <div class="flower__leaf flower__leaf--6"></div>
                <div class="flower__leaf flower__leaf--7"></div>
                <div class="flower__leaf flower__leaf--8 flower__fall-down--pink"></div>
            </div>
        </div>

        <div class="f-wrapper f-wrapper--3">
            <div class="flower__line"></div>
            <div class="f">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__leaf flower__leaf--5"></div>
                <div class="flower__leaf flower__leaf--6"></div>
                <div class="flower__leaf flower__leaf--7"></div>
                <div class="flower__leaf flower__leaf--8 flower__fall-down--purple"></div>
            </div>
        </div>
        <div class="flower__glass"></div>
    </div>
    <div id="timer">60</div>
    <div id="congratulation">Взлетай!</div>
    <div id="water-drop"></div>
    <div id="game-over" class="hidden">
        <p>Гравитация бессердечна :(</p>
        <button id="restart-btn">Начать сначала</button>
    </div>

<script>
    let timer = 60;
    let waterLevel = 15; // начальный уровень воды в vmin
    const timerElement = document.getElementById('timer');
    const flower = document.querySelector('.flower');
    const waterDrop = document.getElementById('water-drop');
    const glass = document.querySelector('.flower__glass');

    function updateTimer() {
        timer--;
        timerElement.textContent = timer;

        // Уменьшать уровень воды каждую секунду
        waterLevel = Math.max(waterLevel - 15/60, 0); // уменьшать на 15vmin за 60 секунд
        glass.style.setProperty('--water-height', waterLevel + 'vmin');

        if (timer > 0) {
            setTimeout(updateTimer, 1000);
        } else {
            flower.classList.add('wilted');
            document.getElementById('game-over').classList.remove('hidden');
        }
    }

    waterDrop.addEventListener('click', () => {
        timer = Math.min(timer + 10, 60); // Долить 10 секунд, но не больше 60
        timerElement.textContent = timer;

        // Увеличить уровень воды
        waterLevel = Math.min(waterLevel + 2.5, 15); // увеличить на 2.5vmin за 10 секунд
        glass.style.setProperty('--water-height', waterLevel + 'vmin');

        // Анимация капли
        waterDrop.style.animation = 'drop-fall 0.5s ease-in-out';
        setTimeout(() => {
            waterDrop.style.animation = '';
        }, 500);
    });

    document.getElementById('restart-btn').addEventListener('click', () => {
        // Сброс игры
        timer = 60;
        waterLevel = 15;
        timerElement.textContent = timer;
        glass.style.setProperty('--water-height', waterLevel + 'vmin');
        flower.classList.remove('wilted');
        document.getElementById('game-over').classList.add('hidden');
        updateTimer();
    });

    updateTimer();
</script>
</body>
</html>
